(function(_ds){var window=this;'use strict';var wJ=function(a){var b=a.pb;a=_ds.U;var c=b[0].imageUrl,d=b[0].servePath,e=b[0].ye,g=b[0].Eg,k=b[0].$f,l=b[0].shareTitle,m=b[0].shareDescription;b=(0,_ds.U)('<div class="devsite-badger-award"><div class="devsite-badger-award-inner"><devsite-badge-awarded badge-name="'+_ds.X(b[0].title)+'" badge-icon-url="'+_ds.X(_ds.lm(c))+'"'+(d?' badge-path="'+_ds.X(d)+'"':"")+(l?' badge-share-title="'+_ds.X(l)+'"':"")+(m?' badge-share-description="'+_ds.X(m)+'"':"")+(e?' next-playlist-url="'+_ds.X(_ds.lm(e))+
'"':"")+(g?" redeem-another":"")+(k?" hide-buttons":"")+" dismiss></devsite-badge-awarded></div></div>");return a(b)},yJ=function(){var a=_ds.Js.call(this,["devsite-badge-awarded"])||this;a.o=new _ds.Lj;a.m=new _ds.ir;a.j=null;a.C=[];a.F=new _ds.Bq;a.H=-1;a.D=new _ds.Ij(function(){return void xJ(a)},250);a.h=null;return a},zJ=function(){return"devsite-badger"},AJ=function(a){return _ds.D(function(b){if(1==b.h){if(!_ds.Cm(a.m))return b.return(!1);_ds.zl(["devsite-badge-awarded"]);return _ds.v(b,window.customElements.whenDefined("devsite-badge-awarded"),
2)}return b.return(!0)})},DJ=function(a){a.o.listen(document.body,"devsite-before-page-change",function(){return void BJ(a)});a.o.listen(document.body,"devsite-award-granted",function(b){(b=b.Z)&&b.detail&&(a.C.push(b.detail.award),a.D.oa())});a.o.listen(document.body,["devsite-page-loaded","devsite-page-changed"],function(){CJ(a);a:if(_ds.Cm(a.m)){var b=a.m.get("temp_badge");if(b){try{var c=JSON.parse(b)}catch(e){a.m.remove("temp_badge");break a}if(3>c.displayCount){a.m.set("temp_badge",JSON.stringify(c));
b=new URL(c.awardUrl,document.location.origin);var d=_ds.ui();b.origin===d.origin&&b.pathname===d.pathname&&(a.C.push(c),a.D.oa())}else a.m.remove("temp_badge")}}})},CJ=function(a){var b,c,d,e;_ds.D(function(g){switch(g.h){case 1:if(a.h)return g.return(a.h.promise);a.h=new _ds.Fm;_ds.z(g,2);return _ds.v(g,AJ(a),4);case 4:b=g.j;if(!b)return a.h.resolve(),g.return(a.h.promise);_ds.A(g,3);break;case 2:return _ds.B(g),a.h.resolve(),g.return(a.h.promise);case 3:return c=!1,_ds.z(g,5),_ds.v(g,a.F.hasWallet(),
7);case 7:c=g.j;_ds.A(g,6);break;case 5:_ds.B(g);case 6:return c?_ds.v(g,window.customElements.whenDefined("devsite-user"),8):(a.h.resolve(),g.return(a.h.promise));case 8:d=document.querySelector("devsite-user#devsite-user");if(!d){g.J(9);break}e=!1;_ds.z(g,10);return _ds.v(g,d.isSignedIn(),12);case 12:e=g.j;_ds.A(g,11);break;case 10:_ds.B(g);case 11:if(!e){g.J(13);break}return _ds.v(g,a.F.getProfile(),13);case 13:a.h.resolve();case 9:return g.return(a.h.promise)}})},xJ=function(a){var b,c,d;return _ds.D(function(e){switch(e.h){case 1:if(a.j||
0===a.C.length||"error"===document.body.getAttribute("type")||EJ.exec(document.location.pathname))return e.return();_ds.z(e,2);return _ds.v(e,window.customElements.whenDefined("devsite-badge-awarded"),4);case 4:_ds.A(e,3);break;case 2:_ds.B(e);case 3:b=a.C.splice(0,1);c=_ds.wm(wJ,{pb:b});if(!c)return e.return();a.o.listen(c,"click",function(g){(g=g.target)&&g.matches("button.dismiss")&&BJ(a)});a.j=c;(d=c.querySelector("devsite-badge-awarded"))?(_ds.Pj(a.o,d,"running",function(){FJ(a.j)}),document.body.appendChild(a.j)):
(document.body.appendChild(a.j),FJ(a.j));_ds.x(e)}})},FJ=function(a){_ds.D(function(b){a&&a.setAttribute("show","");_ds.x(b)})},BJ=function(a){return _ds.D(function(b){if(1==b.h){if(!a.j)return b.return();a.m.remove("temp_badge");a.j.removeAttribute("show");return _ds.v(b,_ds.Mi(200),2)}if(3!=b.h)return _ds.Zg(a.j),a.j=null,_ds.v(b,_ds.Mi(250),3);a.D.oa();_ds.x(b)})};var EJ=/\/redeem.*|\/u[\/]?.*|\/settings[\/]?.*?/;_ds.u(yJ,_ds.Js);yJ.prototype.disconnectedCallback=function(){_ds.Rj(this.o);BJ(this)};yJ.prototype.connectedCallback=function(){var a=this;DJ(this);AJ(this).then(function(b){b||_ds.Zg(a)}).catch(function(){_ds.Zg(a)})};yJ.prototype.connectedCallback=yJ.prototype.connectedCallback;yJ.getTagName=zJ;yJ.prototype.disconnectedCallback=yJ.prototype.disconnectedCallback;try{window.customElements.define(zJ(),yJ)}catch(a){console.warn("devsite.app.customElement.DevsiteBadger",a)};})(_ds_www);
